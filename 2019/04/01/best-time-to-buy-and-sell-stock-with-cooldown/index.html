<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?b8febc6756d7e3980a068de85e5ba226"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    
    
    
    <title>Best Time to Buy and Sell Stock with Cooldown | Mose&#39;s blog | Think Deeper &amp; Work Harder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="leetcode">
    <meta name="description" content="[LeetCode] 309. Say you have an array for which the $i^{th}$element is the price of a given stock on day $i$. Design an algorithm to find the maximum profit. You may complete as many transactions as">
<meta name="keywords" content="leetcode">
<meta property="og:type" content="article">
<meta property="og:title" content="Best Time to Buy and Sell Stock with Cooldown">
<meta property="og:url" content="https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/index.html">
<meta property="og:site_name" content="Mose&#39;s blog">
<meta property="og:description" content="[LeetCode] 309. Say you have an array for which the $i^{th}$element is the price of a given stock on day $i$. Design an algorithm to find the maximum profit. You may complete as many transactions as">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-06-03T04:53:13.655Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Best Time to Buy and Sell Stock with Cooldown">
<meta name="twitter:description" content="[LeetCode] 309. Say you have an array for which the $i^{th}$element is the price of a given stock on day $i$. Design an algorithm to find the maximum profit. You may complete as many transactions as">
    
        <link rel="alternate" type="application/atom+xml" title="Mose&#39;s blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/psb.jpeg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">z2w</h5>
          <a href="mailto:me@zhaoziwen" title="me@zhaoziwen" class="mail">me@zhaoziwen</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/zhaowenzi" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/FTC0003" target="_blank">
                <i class="icon icon-lg icon-weibo"></i>
                Weibo
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Best Time to Buy and Sell Stock with Cooldown</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="Search">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Best Time to Buy and Sell Stock with Cooldown</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-04-01T14:57:33.000Z" itemprop="datePublished" class="page-time">
  2019-04-01
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/LeetCode/">LeetCode</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    

<article id="post-best-time-to-buy-and-sell-stock-with-cooldown" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Best Time to Buy and Sell Stock with Cooldown</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-04-01 22:57:33" datetime="2019-04-01T14:57:33.000Z" itemprop="datePublished">2019-04-01</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/LeetCode/">LeetCode</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>[LeetCode] 309. Say you have an array for which the $i^{th}$element is the price of a given stock on day $i$.</p>
<p>Design an algorithm to find the maximum profit. You may complete as many transactions as you like(ie, buy one and sell one share of the stock multiple times) with the following restrictions:</p>
<ul>
<li>You may not engage in multiple transactions at the same time(ie, you must sell the stock before you buy again).</li>
<li>After you sell your stock, you cannot buy stock on next day. (ie, cool down 1 day)</li>
</ul>
<p>Example:</p>
<p>Input: [1,2,3,0,2]</p>
<p>Output: 3</p>
<p>Explanation: transactions = [buy, sell, cooldown, buy, sell]</p>
</blockquote>
<p>这里的动态规划问题跟之前的稍有不同。</p>
<p>当前买卖股票的行为会受到之前日期买卖股票行为的影响。对一天的状态有：买入bug，卖出sell，冷却cooldown。</p>
<p>但是对于这一天是否持股只有两种状态：持股状态buy，没有持股状态sell, cooldown。</p>
<p>对于当天持股状态时，至当天为止的最大利润有两种可能：</p>
<ol>
<li><p>今天没有买入，跟昨天持股状态一样</p>
</li>
<li><p>今天买入，昨天是冷却期，利润是前天卖出股票时得到的利润减去今天股票的价钱。</p>
<p>二者取最大值。</p>
</li>
</ol>
<p>对于当天未持股状态，至当天为止的最大利润也有两种情况：</p>
<ol>
<li><p>今天没有卖出，跟昨天未持股状态一样</p>
</li>
<li><p>昨天持有股票，今天卖出了，例如是昨天持有股票时候的利润加上今天股票的价钱</p>
<p>二者取最大值</p>
</li>
</ol>
<p>直至最后一天的状态应该是卖出状态。最终利润是sell[n-1]。</p>
<p>状态转移方程：<br>$$<br>sell[i] = max(sell[i-1], buy[i-1]+price[i]);<br>$$<br>$$<br>buy[i] = max(buy[i-1], sell[i-1]-price[i]);<br>$$</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; prices)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(prices.size() == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> pre_bug = <span class="number">0</span>, pre_sell = <span class="number">0</span>, buy = -prices[<span class="number">0</span>], sell = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> price:prices) &#123;</span><br><span class="line">      pre_buy = buy;</span><br><span class="line">      buy = max(pre_buy, pre_sell-price); <span class="comment">// 此处的buy已经指到下一个，pre_buy更新为之前的buy，现在的buy的前一个，但是pre_sell没有更新，为现在的buy的前一个的前一个</span></span><br><span class="line">      pre_sell = sell;</span><br><span class="line">      sell = max(pre_sell, pre_buy+price);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sell;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    Last updated: <time datetime="2019-06-03T04:53:13.655Z" itemprop="dateUpdated">2019-06-03 12:53:13</time>
</span><br>


        
        本文链接：<a href="/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/" target="_blank" rel="external">https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/</a>
        
    </div>
    
    <footer>
        <a href="https://blog.zhaoziwen.com.cn">
            <img src="/img/psb.jpeg" alt="z2w">
            z2w
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/leetcode/">leetcode</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&title=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&pic=https://blog.zhaoziwen.com.cn/img/psb.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&title=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&source=This is my personal blog!" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&via=https://blog.zhaoziwen.com.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2019/04/02/tcp/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">传输控制协议TCP概述</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/03/28/trie-tree/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">字典树(前缀树) Trie Tree(Prefix Tree)</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'false' == 'true',
            appId: "iP2YIxmQy2buSVabbV2JgaeA-gzGzoHsz",
            appKey: "p3Mb85SlKNa9gxEMrwDeJ97o",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->










</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>This blog is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</span>
        </p>
    </div>
    <div class="bottom">
        <p><span>z2w &copy; 2018 - 2019</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank">粤ICP备16110253号-2</a><br>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&title=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&pic=https://blog.zhaoziwen.com.cn/img/psb.jpeg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&title=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&source=This is my personal blog!" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Best Time to Buy and Sell Stock with Cooldown》 — Mose's blog&url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/&via=https://blog.zhaoziwen.com.cn" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://blog.zhaoziwen.com.cn/2019/04/01/best-time-to-buy-and-sell-stock-with-cooldown/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADKUlEQVR42u3aW3KDMAwF0Ox/03QBLXAlkU7sHL4yhRgfd6aqHq9XfB0nV/L82d3fn5Mnfz9/vcLowsbGxl6EfVxeOaP3TPUok8/RLwkbGxt7O3b1NddBKMEn8SU/uNyCjY2NjV1lVDdaDW/Y2NjY2O8IYHkoerbmg42Njf3N7OQF1ZJ9kqL0iv7/WkvDxsbG/nh23hX9/M9v6W9jY2NjfzD7KF7VIlEeSJ5tM98osLGxsTdi5wEgoSZF/yTVqYbS3v6xsbGx92AnASYZl+zlQHmLt5dynD6PjY2NvRE7OYhJcScv1s+HfqohExsbG3s/dj64MynxPNWKmARCbGxs7L3ZedEnwSQrTNKJ6m6xsbGxv4fd+/m8PdC7O2oeYGNjY38Bu3o3AT9V3M/TpJuiEjY2Nvbi7N6/+/mLeyOYkz1E38XGxsbegj0v3OebeHfDoDDug42Njb0dOy+150tXC0DXa84TpFcv6mJjY2N/PHsCfqoNUG0zJytE4RYbGxt7I3aSBuTDMZONTkZ5JqthY2Njr8vupQq9oZ9qA2Ae5E53jo2Njb0dex5+8nWqz4zKRtVpIGxsbOxl2ZP2be/4qm3gpEmcPH86soONjY29ODv5294r6OShrhpfeu2EcocZGxsbexF2L6nICzr5CtV05QiuP9bHxsbG3oidhKg8LCWvf4pRDa6FXjE2Njb2UuxnR3Cqx9FLgap7LtTSsLGxsZdl52WgahEnKST1SkWjHi42Njb2Ruxqk6DX7q2OYE5Gi8oJCTY2NvZG7PkATbKJ3hHPD64c67CxsbGXZVeTh95oTjXJ6e3w5lCwsbGxt2a/YzRnUlpKxnrKsQkbGxv7a9jzVz41GFRNNm6+hY2Njb0F+yheyXEUyjpB+SkvVBXKTNjY2Ngbsaubm+Cvt3UdIJO7kzCJjY2NvTq7GrTy8k2O77WE8wD2x11sbGzs7djVJGFS1n8q/eglPNjY2NjY+Yt7m0uCYp5yPBbAsLGxsbdj9/C9lKZ3lDdrYmNjY2/HroaNHDApDOVjQ9XAho2Njb0Tu1qUuf5Hf15mShrMScDLjwwbGxt7WfYPiBIMN6eZ1FYAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
